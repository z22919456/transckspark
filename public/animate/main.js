!function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){i(1),i(14),t.exports=i(18)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){x=document.createElement("div"),x.className="container hidden",document.body.appendChild(x),m=p.boids.map(function(t,e){var i=document.createElement("div");return i.innerHTML=t.name,i.className="title"+(t.type?" work":""),i.addEventListener("pointerenter",function(){return p.boids[e].velocity.multiplyNum(.1)}),i.addEventListener("pointerleave",function(){return p.boids[e].velocity.divideNum(.1)}),x.appendChild(i),i}),s()}function o(){p.tick(),(0,y.default)(p.boids),p.boids.forEach(function(t,e){var i=t.averagePosition,n=m[e].style;n.transform=n["-webkit-transform"]="translate("+i.x+"px, "+i.y+"px) translate(-50%, -50%)"}),x.className="container"}function s(){p.boids.forEach(function(t,e){var i=m[e],n=i.getBoundingClientRect();u(t,{el:i,elSize:{width:n.width,height:n.height},elSizeMargin:{width:n.width+40,height:n.height+40}})})}function a(){v=window.innerWidth,g=window.innerHeight,p=new c.default(10,[v,g]),m&&s()}var u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},h=(i(2),i(3)),c=n(h),f=i(8),l=n(f),d=i(9),y=n(d),v=void 0,g=void 0,p=void 0,m=void 0,x=void 0;a(),r(),l.default.add(o),window.addEventListener("resize",a)},function(t,e){"use strict";function i(t){window.parent.postMessage(JSON.stringify(t),"*")}function n(t){var e=/homepage\=1/.test(window.location.search);e?i({status:"redirect",domain_path:t}):window.parent.location=t}Object.defineProperty(e,"__esModule",{value:!0}),window.addEventListener("message",function(t){var e=JSON.parse(t.data);!e.domain_path}),i({status:"ready",coverId:window.location.pathname.split("/")[4]}),e.redirect=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(4),a=n(s),u=i(6),h=n(u),c=i(7),f=n(c),l=30,d=function(){function t(e,i){r(this,t),this.boids=[],this.size=a.default.fromArray(i);for(var n=0;n<7;n++){var o=f.default.pijlers[n],s=new h.default({position:new a.default((n+.5)/8,.25+(n%2?.1:-.1)).multiply(this.size.clone().subtractNum(2*l)).addNum(l),maxSpeed:.5+Math.random()/8,maxForce:5+Math.random(),radius:10,wallMargin:30});s.type=o.work,s.name=o.name,s.url=o.url,this.boids.push(s)}for(var u=0;u<6;u++){var c=f.default.disciplines[u],d=new h.default({position:new a.default((u+.5)/6,.75+(u%2?.1:-.1)).multiply(this.size.clone().subtractNum(2*l)).addNum(l),maxSpeed:.3+Math.random()/8,maxForce:Math.random()/10+.5,radius:10,wallMargin:30});d.type=c.work,d.name=c.name,this.boids.push(d)}}return o(t,[{key:"tick",value:function(t){var e=this;this.boids.forEach(function(i){return i.tick(e.boids,e.size,t)})}}]),t}();e.default=d},function(t,e,i){"use strict";function n(t,e){this.x=t||0,this.y=e||0}t.exports=n;var r=i(5);n.prototype={add:function(t){return this.x+=t.x,this.y+=t.y,this},set:function(t,e){return this.x=t,this.y=e,this},addNum:function(t){return this.x+=t,this.y+=t,this},addX:function(t){return this.x+=t,this},addY:function(t){return this.y+=t,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},subtractNum:function(t){return this.x-=t,this.y-=t,this},subtractX:function(t){return this.x-=t,this},subtractY:function(t){return this.y-=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideNum:function(t){return 0===t?(this.x=0,this.y=0):(this.x/=t,this.y/=t),this},divideX:function(t){return 0===t?this.x=0:this.x/=t,this},divideY:function(t){return 0===t?this.y=0:this.y/=t,this},invert:function(){return this.x=-this.x,this.y=-this.y,this},invertX:function(){return this.x=-this.x,this},invertY:function(){return this.y=-this.y,this},modulo:function(t){return this.x=this.x%t.x,this.y=this.y%t.y,this},moduloNum:function(t){return this.x=this.x%t,this.y=this.y%t,this},moduloX:function(t){return this.x=this.x%t,this},moduloY:function(t){return this.y=this.y%t,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyNum:function(t){return this.x*=t,this.y*=t,this},multiplyX:function(t){return this.x*=t,this},multiplyY:function(t){return this.y*=t,this},normalize:function(t){void 0===t&&(t=1);var e=this.getLength(),i=0!==e?t/e:0;return this.multiplyNum(i),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},abs:function(){return this.x=Math.abs(this.x),this.y=Math.abs(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},mix:function(t,e){return this.x=r.mix(this.x,t.x,e),this.y=r.mix(this.y,t.y,e),this},clone:function(){return new n(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},getVector:function(t){return t.clone().subtract(this)},zero:function(){return this.x=this.y=0,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},project:function(t){var e=t.isZero()?0:this.dot(t)/t.getLengthSquared();return this.x=e*t.x,this.y=e*t.y,this},get angle(){return this.getAngle()},getAngle:function(t){return r.radiansToDegrees(this.getAngleInRadians(t))},getAngleInRadians:function(t){if(t){var e=this.getLength()*t.getLength();if(r.isZero(e))return NaN;var i=this.dot(t)/e;return Math.acos(i<-1?-1:i>1?1:i)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},getDirectedAngle:function(t){return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},set angle(t){this.setAngle(t)},setAngle:function(t){return this.setAngleInRadians(r.degreesToRadians(t)),this},setAngleInRadians:function(t){if(this._angle=t,console.log(this.isZero()),!this.isZero()){var e=this.getLength();this.x=Math.cos(t)*e,this.y=Math.sin(t)*e}return this},rotate:function(t,e){if(0===t)return this;var i=r.degreesToRadians(t),n=Math.sin(i),o=Math.cos(i),s=this.x,a=this.y;e&&(s-=e.x,a-=e.y);var u=s*o-a*n,h=s*n+a*o;return e&&(u+=e.x,h+=e.y),this.x=u,this.y=h,this},rotateBy:function(t){return this.rotate(this.getAngle()+t)},getDistance:function(t){return Math.sqrt(this.getDistanceSquared(t))},getDistanceSquared:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i},getLength:function(){return Math.sqrt(this.getLengthSquared())},get length(){return this.getLength()},getApproximateLength:function(){var t=Math.abs(this.x),e=Math.abs(this.y),i=Math.min(t,e),n=Math.max(t,e);return n+3*i/32+Math.max(0,2*i-n)/8+Math.max(0,4*i-n)/16},getLengthSquared:function(){return this.x*this.x+this.y*this.y},set length(t){this.setLength(t)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this.x=Math.cos(e)*t,this.y=Math.sin(e)*t}else{var i=t/this.getLength();this.x=this.x*i,this.y=this.y*i}return this},limitLength:function(t){var e=this.getLength();if(e>t){var i=t/e;this.x=this.x*i,this.y=this.y*i}return this},inverse:function(){return this.x=1/this.x,this.y=1/this.y,this},isClose:function(t,e){return this.getDistanceSquared(t)<e*e},isCollinear:function(t){return r.isZero(Math.abs(this.cross(t)))},isOrthogonal:function(t){return r.isZero(Math.abs(this.dot(t)))},isZero:function(){return r.isZero(this.x)&&r.isZero(this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},toString:function(){return"{ x: "+r.format(this.x)+", y: "+r.format(this.y)+" }"},toArray:function(){return[this.x,this.y]},toObject:function(){return{x:this.x,y:this.y}}},n.prototype.getHorizontalAngle=n.prototype.getAngle,n.prototype.getHorizontalAngleDeg=n.prototype.getAngleInDegrees,n.fromArray=function(t){return new n(t[0]||0,t[1]||0)},n.fromObject=function(t){return new n(t.x||0,t.y||0)},n.fromAngleWithLength=function(t,e){var i=new n(e,0);return i.setAngle(t),i},n.randomVector=function(t){t=t||1;var e=2*Math.random()*Math.PI;return new n(Math.cos(e)*t,Math.sin(e)*t)},n.random=function(){return new n(Math.random(),Math.random())},n.min=function(t,e){return new n(Math.min(t.x,e.x),Math.min(t.y,e.y))},n.max=function(t,e){return new n(Math.max(t.x,e.x),Math.max(t.y,e.y))}},function(t,e){"use strict";var i=1e-12,n=180/Math.PI;t.exports={EPSILON:i,mix:function(t,e,i){return t*(1-i)+e*i},radiansToDegrees:function(t){return t*n},degreesToRadians:function(t){return t/n},format:function(t){var e=1e5;return Math.round(t*e)/e},isZero:function(t){return t<i}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(4),a=n(s),u=function(){function t(e){var i=e.position,n=e.maxSpeed,o=e.maxForce,s=e.radius,u=e.wallMargin;r(this,t),this.acceleration=new a.default,this.velocity=a.default.randomVector(),this.position=i.clone(),this.averagePosition=i.clone(),this.radius=s,this.maxSpeed=n,this.maxSpeedSq=n*n,this.maxForce=o,this.desiredSeperation=1e4,this.wallMargin=u||0}return o(t,[{key:"tick",value:function(t,e){this.flock(t),this.update(),this.bounceBorder(e)}},{key:"flock",value:function(t){var e=this.separationVector(t),i=this.alignmentVector(t),n=this.cohesionVector(t);e.multiplyNum(2),i.multiplyNum(1),n.multiplyNum(1),this.acceleration.add(e).add(i).add(n)}},{key:"update",value:function(){this.acceleration.limitLength(this.maxForce),this.velocity.add(this.acceleration).limitLength(this.maxSpeed),this.position.add(this.velocity),this.averagePosition.mix(this.position,.2),this.acceleration.zero()}},{key:"predictVectorTo",value:function(t){var e=this.position.getDistanceSquared(t.position)/this.maxSpeedSq;return t.velocity.clone().multiplyNum(e)}},{key:"pursueBoid",value:function(t){var e=this.predictVectorTo(t).add(t.position);return this.arrive(e),this}},{key:"evadeBoid",value:function(t){var e=this.predictVectorTo(t).add(t.position);return this.flee(e),this}},{key:"flee",value:function(t){var e=this.seekVector(t).inverse();this.acceleration.add(e)}},{key:"arrive",value:function(t){var e=this.steerVector(t,!0);this.acceleration.add(e)}},{key:"bounceBorder",value:function(t){var e=this.position,i=this.radius;e.x<i+this.wallMargin&&this.velocity.addX(1),e.y<i+this.wallMargin&&this.velocity.addY(1),e.x>t.x-i-this.wallMargin&&this.velocity.addX(-1),e.y>t.y-i-this.wallMargin&&this.velocity.addY(-1)}},{key:"seekVector",value:function(t){return this.position.getVector(t).normalize(this.maxSpeed).subtract(this.velocity).limitLength(this.maxForce)}},{key:"steerVector",value:function(t,e){var i=this.position.vector(t),n=i.length;return i.normalize(e&&n<100?this.maxSpeed*(n/100):this.maxSpeed),i.subtract(this.velocity).limitLength(this.maxForce)}},{key:"isSame",value:function(t){return this.name===t.name&&this.maxForce>t.maxForce}},{key:"separationVector",value:function(t){for(var e=new a.default,i=0,n=new a.default,r=0,o=t.length;r<o;r++){var s=t[r];n.copy(this.position).subtract(s.position);var u=n.getLengthSquared(),h=this.isSame(s);h&&u<2*this.desiredSeperation?this.evadeBoid(s):u>0&&u<this.desiredSeperation&&(e.add(n.normalize()),i++)}return i>0&&e.divideNum(i),e.isZero()||e.normalize(this.maxSpeed).subtract(this.velocity).limitLength(this.maxForce),e}},{key:"alignmentVector",value:function(t){for(var e=new a.default,i=0,n=0,r=t.length;n<r;n++){var o=t[n],s=this.position.getDistanceSquared(o.position);s>0&&s<this.desiredSeperation&&(e.add(o.velocity),i++)}return i>0&&e.divideNum(i),e.isZero()||e.normalize(this.maxSpeed).subtract(this.velocity).limitLength(this.maxForce),e}},{key:"cohesionVector",value:function(t){for(var e=new a.default,i=0,n=0,r=t.length;n<r;n++){var o=t[n],s=this.position.getDistanceSquared(o.position);o!==this&&s<this.desiredSeperation&&(e.add(o.position),i++)}return i>0?(e.divideNum(i),this.seekVector(e)):e}}]),t}();e.default=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={disciplines:[{name:"首都",work:!0},{name:"紀念",work:!0},{name:"使用<br/>營運",work:!0},{name:"想像與<br/>可能性",work:!0},{name:"對話",work:!0},{name:"公共性",work:!0}],pijlers:[{name:"生活"},{name:"人權<br/>歷史"},{name:"民主"},{name:"中正<br/>紀念堂"},{name:"開放"},{name:"展望<br/>與轉型"},{name:"城市<br/>精神"}]}},function(t,e){"use strict";function i(){return a=!1,c}function n(){return a=!0,u=!0,window.requestAnimationFrame(r),c}function r(){h.forEach(function(t){return t()}),a&&window.requestAnimationFrame(r)}function o(t){return h||(h=[]),h.push(t),a&&!u&&n(),c}function s(t){var e=h.indexOf(t);return e!==-1&&h.splice(e,1),c}Object.defineProperty(e,"__esModule",{value:!0});var a=!0,u=!1,h=[],c={stop:i,start:n,add:o,remove:s};e.default=c},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(){(0,h.default)(M,window,C),L.scale(C,C),g=M.width,p=M.height}function o(t,e){var i=a(t,2),n=i[0],r=i[1];L.lineWidth=e,L.beginPath(),L.strokeStyle="white",L.moveTo(n.x,n.y),L.lineTo(r.x,r.y),L.stroke()}function s(t){L.clearRect(0,0,g,p);var e=t.length;m&&x.mix(m,.1),m&&t.filter(function(t){return t.averagePosition.isClose(x,50)}).forEach(function(t,e){return 0===e&&t.position.mix(x,.05)}),w(t.map(function(t){return t.position.toArray()}).concat(m&&!t.some(function(t){return t.averagePosition.isClose(x,60)})?[x.toArray()]:[])).edges.filter(function(t){return t.right}).map(function(i){var n=i.left.index,r=i.right.index,o=n===e?b:t[n],s=r===e?b:t[r],a=[o,s];return a}).filter(function(t){var e=a(t,2),i=e[0],n=e[1],r=i.averagePosition.getDistanceSquared(n.averagePosition);return i.name!==n.name&&r<70*p&&r>1e4}).map(function(e){var i=a(e,2),n=i[0],r=i[1];if(n.name!==r.name){var s=e.map(function(t){return t.averagePosition});s[0]=(0,v.default)(s[1],s[0],s[0],n.elSizeMargin),s[1]=(0,v.default)(s[0],s[1],s[1],r.elSizeMargin);var u=t.some(function(t){return(0,v.default)(s[0],s[1],t.averagePosition,t.elSize)}),h=n.type===r.type;u||o(s,h?1:8)}})}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=s;var u=i(10),h=n(u),c=i(12),f=n(c),l=i(4),d=n(l),y=i(13),v=n(y),g=void 0,p=void 0,m=void 0,x=new d.default,b={averagePosition:x,position:x,elSizeMargin:{width:80,height:80},name:"mouse",elSize:{width:100,height:100},velocity:new d.default,type:!0},w=f.default.voronoi(),M=document.createElement("canvas"),L=M.getContext("2d"),C=window.devicePixelRatio||1;document.body.appendChild(M),document.addEventListener("pointermove",function(t){var e=0;m?m.set(t.clientX+e,t.clientY+e):(m=new d.default(t.clientX+e,t.clientY+e),x.set(m.x,m.y))}),document.addEventListener("pointerout",function(t){m=null}),r(),window.addEventListener("resize",r)},function(t,e,i){"use strict";function n(t,e,i){function n(){var e=n.parent||t.parentNode;if("function"==typeof e)var i=e(o)||o,a=i[0],u=i[1];else if(e&&e!==document.body)var h=r(e),a=0|h[0],u=0|h[1];else var a=window.innerWidth,u=window.innerHeight;return s?(t.setAttribute("width",a*n.scale+"px"),t.setAttribute("height",u*n.scale+"px")):(t.width=a*n.scale,t.height=u*n.scale),t.style.width=a+"px",t.style.height=u+"px",n}var s="SVG"===t.nodeName.toUpperCase();return t.style.position=t.style.position||"absolute",t.style.top=0,t.style.left=0,n.scale=parseFloat(i||1),n.parent=e,n()}var r=i(11);t.exports=n;var o=new Float32Array(2)},function(t,e){"use strict";function i(t){if(t===window||t===document.body)return[window.innerWidth,window.innerHeight];if(!t.parentNode){var e=!0;document.body.appendChild(t)}var i=t.getBoundingClientRect(),r=getComputedStyle(t),o=(0|i.height)+n(r.getPropertyValue("margin-top"))+n(r.getPropertyValue("margin-bottom")),s=(0|i.width)+n(r.getPropertyValue("margin-left"))+n(r.getPropertyValue("margin-right"));return e&&document.body.removeChild(t),[s,o]}function n(t){return parseFloat(t)||0}t.exports=i},function(t,e,i){var n,r,o,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(i,a){"object"===s(e)&&"undefined"!=typeof t?a(e):(r=[e],n=a,o="function"==typeof n?n.apply(e,r):n,!(void 0!==o&&(t.exports=o)))}(void 0,function(t){"use strict";function e(t){return function(){return t}}function i(t){return t[0]}function n(t){return t[1]}function r(){this._=null}function o(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function s(t,e){var i=e,n=e.R,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function a(t,e){var i=e,n=e.L,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function u(t){for(;t.L;)t=t.L;return t}function h(t,e,i,n){var r=[null,null],o=F.push(r)-1;return r.left=t,r.right=e,i&&f(r,t,e,i),n&&f(r,e,t,n),q[t.index].halfedges.push(o),q[e.index].halfedges.push(o),r}function c(t,e,i){var n=[e,i];return n.left=t,n}function f(t,e,i,n){t[0]||t[1]?t.left===i?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=i)}function l(t,e,i,n,r){var o,s,a=t[0],u=t[1],h=a[0],c=a[1],f=u[0],l=u[1],d=0,y=1,v=f-h,g=l-c;if(s=e-h,v||!(s>0)){if(s/=v,v<0){if(s<d)return;s<y&&(y=s)}else if(v>0){if(s>y)return;s>d&&(d=s)}if(s=n-h,v||!(s<0)){if(s/=v,v<0){if(s>y)return;s>d&&(d=s)}else if(v>0){if(s<d)return;s<y&&(y=s)}if(s=i-c,g||!(s>0)){if(s/=g,g<0){if(s<d)return;s<y&&(y=s)}else if(g>0){if(s>y)return;s>d&&(d=s)}if(s=r-c,g||!(s<0)){if(s/=g,g<0){if(s>y)return;s>d&&(d=s)}else if(g>0){if(s<d)return;s<y&&(y=s)}return d>0||y<1?(o=t.left,s=t.right,d>0&&(a=[h+d*v,c+d*g]),y<1&&(u=[h+y*v,c+y*g]),t=[a,u],t.left=o,t.right=s,t):t}}}}}function d(t,e,i,n,r){var o=t[1];if(o)return t;var s,a,u=t[0],h=t.left,c=t.right,f=h[0],l=h[1],d=c[0],y=c[1],v=(f+d)/2,g=(l+y)/2;if(y===l){if(v<e||v>=n)return;if(f>d){if(u){if(u[1]>=r)return}else u=[v,i];o=[v,r]}else{if(u){if(u[1]<i)return}else u=[v,r];o=[v,i]}}else if(s=(f-d)/(y-l),a=g-s*v,s<-1||s>1)if(f>d){if(u){if(u[1]>=r)return}else u=[(i-a)/s,i];o=[(r-a)/s,r]}else{if(u){if(u[1]<i)return}else u=[(r-a)/s,r];o=[(i-a)/s,i]}else if(l<y){if(u){if(u[0]>=n)return}else u=[e,s*e+a];o=[n,s*n+a]}else{if(u){if(u[0]<e)return}else u=[n,s*n+a];o=[e,s*e+a]}return t=[u,o],t.left=h,t.right=c,t}function y(t,e,i,n){for(var r,o=F.length,s=new Array(o);o--;)(r=d(F[o],t,e,i,n))&&(r=l(r,t,e,i,n))&&(Math.abs(r[0][0]-r[1][0])>D||Math.abs(r[0][1]-r[1][1])>D)&&(s[o]=r);return s}function v(t){return q[t.index]={site:t,halfedges:[]}}function g(t,e){var i=t.site,n=e.left,r=e.right;return i===r&&(r=n,n=i),r?Math.atan2(r[1]-n[1],r[0]-n[0]):(i===n?(n=e[1],r=e[0]):(n=e[0],r=e[1]),Math.atan2(n[0]-r[0],r[1]-n[1]))}function p(t,e){return e[+(e.left!==t.site)]}function m(t,e){return e[+(e.left===t.site)]}function x(){for(var t,e,i,n,r=0,o=q.length;r<o;++r)if((t=q[r])&&(n=(e=t.halfedges).length)){var s=new Array(n),a=new Array(n);for(i=0;i<n;++i)s[i]=i,a[i]=g(t,F[e[i]]);for(s.sort(function(t,e){return a[e]-a[t]}),i=0;i<n;++i)a[i]=e[s[i]];for(i=0;i<n;++i)e[i]=a[i]}}function b(t,e,i,n,r){for(var o,s,a,u,h,f,l,d,y,v,g=q.length;g--;)if(o=q[g]){for(a=o.halfedges,s=a.length;s--;)t[a[s]]||a.splice(s,1);for(s=0,u=a.length;s<u;)d=m(o,t[a[s]]),y=d[0],v=d[1],h=p(o,t[a[++s%u]]),f=h[0],l=h[1],(Math.abs(y-f)>D||Math.abs(v-l)>D)&&(a.splice(s,0,t.push(c(o.site,d,Math.abs(y-e)<D&&r-v>D?[e,Math.abs(f-e)<D?l:r]:Math.abs(v-r)<D&&n-y>D?[Math.abs(l-r)<D?f:n,r]:Math.abs(y-n)<D&&v-i>D?[n,Math.abs(f-n)<D?l:i]:Math.abs(v-i)<D&&y-e>D?[Math.abs(l-i)<D?f:e,i]:null))-1),++u)}}function w(){o(this),this.x=this.y=this.arc=this.site=this.cy=null}function M(t){var e=t.P,i=t.N;if(e&&i){var n=e.site,r=t.site,o=i.site;if(n!==o){var s=r[0],a=r[1],u=n[0]-s,h=n[1]-a,c=o[0]-s,f=o[1]-a,l=2*(u*f-h*c);if(!(l>=-Y)){var d=u*u+h*h,y=c*c+f*f,v=(f*d-h*y)/l,g=(u*y-c*d)/l,p=T.pop()||new w;p.arc=t,p.site=r,p.x=v+s,p.y=(p.cy=g+a)+Math.sqrt(v*v+g*g),t.circle=p;for(var m=null,x=I._;x;)if(p.y<x.y||p.y===x.y&&p.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}I.insert(m,p),m||(O=p)}}}}function L(t){var e=t.circle;e&&(e.P||(O=e.N),I.remove(e),T.push(e),o(e),t.circle=null)}function C(){o(this),this.edge=this.site=this.circle=null}function N(t){var e=Z.pop()||new C;return e.site=t,e}function S(t){L(t),U.remove(t),Z.push(t),o(t)}function k(t){var e=t.circle,i=e.x,n=e.cy,r=[i,n],o=t.P,s=t.N,a=[t];S(t);for(var u=o;u.circle&&Math.abs(i-u.circle.x)<D&&Math.abs(n-u.circle.cy)<D;)o=u.P,a.unshift(u),S(u),u=o;a.unshift(u),L(u);for(var c=s;c.circle&&Math.abs(i-c.circle.x)<D&&Math.abs(n-c.circle.cy)<D;)s=c.N,a.push(c),S(c),c=s;a.push(c),L(c);var l,d=a.length;for(l=1;l<d;++l)c=a[l],u=a[l-1],f(c.edge,u.site,c.site,r);u=a[0],c=a[d-1],c.edge=h(u.site,c.site,null,r),M(u),M(c)}function P(t){for(var e,i,n,r,o=t[0],s=t[1],a=U._;a;)if(n=R(a,s)-o,n>D)a=a.L;else{if(r=o-_(a,s),!(r>D)){n>-D?(e=a.P,i=a):r>-D?(e=a,i=a.N):e=i=a;break}if(!a.R){e=a;break}a=a.R}v(t);var u=N(t);if(U.insert(e,u),e||i){if(e===i)return L(e),i=N(e.site),U.insert(u,i),u.edge=i.edge=h(e.site,u.site),M(e),void M(i);if(!i)return void(u.edge=h(e.site,u.site));L(e),L(i);var c=e.site,l=c[0],d=c[1],y=t[0]-l,g=t[1]-d,p=i.site,m=p[0]-l,x=p[1]-d,b=2*(y*x-g*m),w=y*y+g*g,C=m*m+x*x,S=[(x*w-g*C)/b+l,(y*C-m*w)/b+d];f(i.edge,c,p,S),u.edge=h(c,t,null,S),i.edge=h(t,p,null,S),M(e),M(i)}}function R(t,e){var i=t.site,n=i[0],r=i[1],o=r-e;if(!o)return n;var s=t.P;if(!s)return-(1/0);i=s.site;var a=i[0],u=i[1],h=u-e;if(!h)return a;var c=a-n,f=1/o-1/h,l=c/h;return f?(-l+Math.sqrt(l*l-2*f*(c*c/(-2*h)-u+h/2+r-o/2)))/f+n:(n+a)/2}function _(t,e){var i=t.N;if(i)return R(i,e);var n=t.site;return n[1]===e?n[0]:1/0}function A(t,e,i){return(t[0]-i[0])*(e[1]-t[1])-(t[0]-e[0])*(i[1]-t[1])}function E(t,e){return e[1]-t[1]||e[0]-t[0]}function j(t,e){var i,n,o,s=t.sort(E).pop();for(F=[],q=new Array(t.length),U=new r,I=new r;;)if(o=O,s&&(!o||s[1]<o.y||s[1]===o.y&&s[0]<o.x))s[0]===i&&s[1]===n||(P(s),i=s[0],n=s[1]),s=t.pop();else{if(!o)break;k(o.arc)}if(x(),e){var a=e[0][0],u=e[0][1],h=e[1][0],c=e[1][1];this.extent=[[a,u],[h,c]],this.cellEdges=y(a,u,h,c),b(this.cellEdges,a,u,h,c)}else this.cellEdges=F;this.cells=q,this.edges=F,U=I=F=q=null}function V(){function t(t){return new j(t.map(function(e,i){var n=[Math.round(r(e,i,t)/D)*D,Math.round(o(e,i,t)/D)*D];return n.index=i,n.data=e,n}),s)}var r=i,o=n,s=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(i){return arguments.length?(r="function"==typeof i?i:e(+i),t):r},t.y=function(i){return arguments.length?(o="function"==typeof i?i:e(+i),t):o},t.extent=function(e){return arguments.length?(s=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):s&&[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},t.size=function(e){return arguments.length?(s=null==e?null:[[0,0],[+e[0],+e[1]]],t):s&&[s[1][0],s[1][1]]},t}var z="0.3.3";r.prototype={constructor:r,insert:function(t,e){var i,n,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else this._?(t=u(this._),e.P=null,e.N=t,t.P=t.L=e,i=t):(e.P=e.N=null,this._=e,i=null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)n=i.U,i===n.L?(r=n.R,r&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.R&&(s(this,i),t=i,i=t.U),i.C=!1,n.C=!0,a(this,n))):(r=n.L,r&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.L&&(a(this,i),t=i,i=t.U),i.C=!1,n.C=!0,s(this,n))),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,n,r=t.U,o=t.L,h=t.R;if(i=o?h?u(h):o:h,r?r.L===t?r.L=i:r.R=i:this._=i,o&&h?(n=i.C,i.C=t.C,i.L=o,o.U=i,i!==h?(r=i.U,i.U=t.U,t=i.R,r.L=t,i.R=h,h.U=i):(i.U=r,r=i,t=i.R)):(n=t.C,t=i),t&&(t.U=r),!n){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===r.L){if(e=r.R,e.C&&(e.C=!1,r.C=!0,s(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,a(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,s(this,r),t=this._;break}}else if(e=r.L,e.C&&(e.C=!1,r.C=!0,a(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,s(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,a(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var O,U,q,I,F,T=[],Z=[],D=1e-6,Y=1e-12;j.prototype={constructor:j,polygons:function t(){var e=this.cells,i=this.cellEdges,n=this.extent,r=n[0][0],o=n[0][1],s=n[1][0],a=n[1][1],t=new Array(e.length);return e.forEach(function(e,n){var u,h=e.site,c=e.halfedges;if(c.length)u=c.map(function(t){return p(e,i[t])});else{if(!(h[0]>=r&&h[0]<=s&&h[1]>=o&&h[1]<=a))return;u=[[r,a],[s,a],[s,o],[r,o]]}t[n]=u,u.data=h.data}),t},triangles:function t(){var t=[],e=this.edges;return this.cells.forEach(function(i,n){for(var r,o=i.site,s=i.halfedges,a=-1,u=s.length,h=e[s[u-1]],c=h.left===o?h.right:h.left;++a<u;)r=c,h=e[s[a]],c=h.left===o?h.right:h.left,n<r.index&&n<c.index&&A(o,r,c)<0&&t.push([o.data,r.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})}},t.version=z,t.voronoi=V})},function(t,e){"use strict";function i(t,e,i,n){for(var r=t.x,o=t.y,s=e.x-r,a=e.y-o,u=[-s,s,-a,a],h=i.x-.5*n.width,c=i.y-.5*n.height,f=[r-h,h+n.width-r,o-c,c+n.height-o],l=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,y=0;y<4;y++)if(0===u[y]){if(f[y]<0)return!1}else{var v=f[y]/u[y];u[y]<0&&l<v?l=v:u[y]>0&&d>v&&(d=v)}return!(l>d||l>1||l<0)&&{x:r+l*s,y:o+l*a}}t.exports=i},function(t,e){},,,,function(t,e){}]);